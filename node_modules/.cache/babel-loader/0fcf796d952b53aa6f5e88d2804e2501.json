{"ast":null,"code":"import _regeneratorRuntime from\"/Users/jaesmacbook/Desktop/Fullstack_work/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/jaesmacbook/Desktop/Fullstack_work/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/jaesmacbook/Desktop/Fullstack_work/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';// import ReactDOM from 'react-dom/client';\nimport{Route,BrowserRouter,Routes,useNavigate}from'react-router-dom';import'./App.css';import{Activities,Login,Register,Routines,Home,Navbar}from'./components';import{getRoutines,getUserDetails}from'./api';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),routines=_useState2[0],setRoutines=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),token=_useState4[0],setToken=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),user=_useState6[0],setUser=_useState6[1];var navigate=useNavigate();function logout(){window.localStorage.removeItem('token');setToken('');setUser({});}function fetchRoutines(){return _fetchRoutines.apply(this,arguments);}function _fetchRoutines(){_fetchRoutines=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var results;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getRoutines(token);case 2:results=_context.sent;setRoutines(results.data.routines);case 4:case\"end\":return _context.stop();}}},_callee);}));return _fetchRoutines.apply(this,arguments);}function getMe(){return _getMe.apply(this,arguments);}function _getMe(){_getMe=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var storedToken,results;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:storedToken=window.localStorage.getItem('token');if(token){_context2.next=4;break;}if(storedToken){setToken(storedToken);}return _context2.abrupt(\"return\");case 4:_context2.next=6;return getUserDetails(token);case 6:results=_context2.sent;if(results.success){setUser(results.data);}else{console.log(results.error.message);}case 8:case\"end\":return _context2.stop();}}},_callee2);}));return _getMe.apply(this,arguments);}useEffect(function(){fetchRoutines();},[token]);useEffect(function(){getMe();},[token]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Navbar,{logout:logout,token:token}),/*#__PURE__*/_jsx(BrowserRouter,{children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Home,{})}),/*#__PURE__*/_jsx(Route,{path:\"/Activities\",element:/*#__PURE__*/_jsx(Activities//activities={activities} \n,{})}),/*#__PURE__*/_jsx(Route,{path:\"/myRoutines\",element:/*#__PURE__*/_jsx(\"myRoutines\",{})}),/*#__PURE__*/_jsx(Route,{path:\"/Routines\",element:/*#__PURE__*/_jsx(Routines//routines={routines}\n,{})}),/*#__PURE__*/_jsx(Route,{path:\"/register\",element:/*#__PURE__*/_jsx(Register,{setToken:setToken,token:token,navigate:navigate})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(Login,{setToken:setToken,navigate:navigate})})]})})]});};export default App;","map":{"version":3,"names":["React","useState","useEffect","Route","BrowserRouter","Routes","useNavigate","Activities","Login","Register","Routines","Home","Navbar","getRoutines","getUserDetails","App","routines","setRoutines","token","setToken","user","setUser","navigate","logout","window","localStorage","removeItem","fetchRoutines","results","data","getMe","storedToken","getItem","success","console","log","error","message"],"sources":["/Users/jaesmacbook/Desktop/Fullstack_work/fitnessProject/UNIV_FitnessTrackr_Frontend/src/App.js"],"sourcesContent":["\nimport React, { useState, useEffect } from 'react';\n// import ReactDOM from 'react-dom/client';\nimport { Route, BrowserRouter, Routes, useNavigate  } from 'react-router-dom';\nimport './App.css';\n\n\nimport {\n  Activities,\n  Login,\n  Register,\n  Routines,\n  Home,\n  Navbar\n} from './components'; \n\nimport {\n  getRoutines,\n  getUserDetails\n} from './api';\n\n\nconst App = () => {\n  \n const [routines, setRoutines] = useState([]);\n  const [token, setToken] = useState('');\n  const [user, setUser] = useState({});\n  \n  const navigate = useNavigate();\n  \n  function logout() {\n    window.localStorage.removeItem('token');\n    setToken('');\n    setUser({});\n  }\n  \n  async function fetchRoutines() {\n    const results = await getRoutines(token)\n    setRoutines(results.data.routines);\n  }\n  \n  async function getMe() {\n    const storedToken = window.localStorage.getItem('token');\n    \n    if (!token) {\n      if (storedToken) {\n        setToken(storedToken);\n      }\n      return;\n    }\n    \n    const results = await getUserDetails(token)\n    if (results.success) {\n      setUser(results.data);\n    } else {\n      console.log(results.error.message);\n    }\n  }\n  \n  useEffect(() => {\n    fetchRoutines();\n  }, [token])\n  \n  useEffect(() => {\n    getMe();\n  }, [token])\n  \n  return (\n    <div>\n      <Navbar logout={ logout } token={ token }/>\n    <BrowserRouter >\n    <Routes>\n\n\n      <Route\n        path='/'\n        element={<Home />}\n      />\n\n      <Route \n        path='/Activities' \n        element={<Activities \n        //activities={activities} \n    />} \n    />\n\n\n<Route \n        path='/myRoutines' \n        element={<myRoutines\n        //activities={activities} \n    />} \n    />\n\n\n    \n\n    <Route \n      path='/Routines'\n      element={<Routines\n      //routines={routines}\n    />}\n    />\n\n\n{/* <Route \n      path='/Navbar'\n      element={<Navbar\n      //routines={routines}\n    />}\n    /> */}\n   \n\n\n <Route \n    path='/register' \n    element={<Register \n    setToken={ setToken } \n    token={token} \n    navigate={navigate} \n  />} \n/>\n<Route\n    path='/login'\n    element={ <Login \n    setToken={ setToken }\n    navigate={ navigate }\n  />}\n/>\n      </Routes>\n    </BrowserRouter>\n    </div>\n  );\n}\n\nexport default App;"],"mappings":"6YACA,MAAOA,MAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD;AACA,OAASC,KAAK,CAAEC,aAAa,CAAEC,MAAM,CAAEC,WAAW,KAAS,kBAAkB,CAC7E,MAAO,WAAW,CAGlB,OACEC,UAAU,CACVC,KAAK,CACLC,QAAQ,CACRC,QAAQ,CACRC,IAAI,CACJC,MAAM,KACD,cAAc,CAErB,OACEC,WAAW,CACXC,cAAc,KACT,OAAO,CAAC,wFAGf,GAAMC,IAAG,CAAG,QAANA,IAAG,EAAS,CAEjB,cAAgCd,QAAQ,CAAC,EAAE,CAAC,wCAArCe,QAAQ,eAAEC,WAAW,eAC3B,eAA0BhB,QAAQ,CAAC,EAAE,CAAC,yCAA/BiB,KAAK,eAAEC,QAAQ,eACtB,eAAwBlB,QAAQ,CAAC,CAAC,CAAC,CAAC,yCAA7BmB,IAAI,eAAEC,OAAO,eAEpB,GAAMC,SAAQ,CAAGhB,WAAW,EAAE,CAE9B,QAASiB,OAAM,EAAG,CAChBC,MAAM,CAACC,YAAY,CAACC,UAAU,CAAC,OAAO,CAAC,CACvCP,QAAQ,CAAC,EAAE,CAAC,CACZE,OAAO,CAAC,CAAC,CAAC,CAAC,CACb,CAAC,QAEcM,cAAa,mJAA5B,uKACwBd,YAAW,CAACK,KAAK,CAAC,QAAlCU,OAAO,eACbX,WAAW,CAACW,OAAO,CAACC,IAAI,CAACb,QAAQ,CAAC,CAAC,sDACpC,wDAEcc,MAAK,2HAApB,kKACQC,WAAW,CAAGP,MAAM,CAACC,YAAY,CAACO,OAAO,CAAC,OAAO,CAAC,IAEnDd,KAAK,0BACR,GAAIa,WAAW,CAAE,CACfZ,QAAQ,CAACY,WAAW,CAAC,CACvB,CAAC,gEAImBjB,eAAc,CAACI,KAAK,CAAC,QAArCU,OAAO,gBACb,GAAIA,OAAO,CAACK,OAAO,CAAE,CACnBZ,OAAO,CAACO,OAAO,CAACC,IAAI,CAAC,CACvB,CAAC,IAAM,CACLK,OAAO,CAACC,GAAG,CAACP,OAAO,CAACQ,KAAK,CAACC,OAAO,CAAC,CACpC,CAAC,wDACF,wCAEDnC,SAAS,CAAC,UAAM,CACdyB,aAAa,EAAE,CACjB,CAAC,CAAE,CAACT,KAAK,CAAC,CAAC,CAEXhB,SAAS,CAAC,UAAM,CACd4B,KAAK,EAAE,CACT,CAAC,CAAE,CAACZ,KAAK,CAAC,CAAC,CAEX,mBACE,oCACE,KAAC,MAAM,EAAC,MAAM,CAAGK,MAAQ,CAAC,KAAK,CAAGL,KAAO,EAAE,cAC7C,KAAC,aAAa,wBACd,MAAC,MAAM,yBAGL,KAAC,KAAK,EACJ,IAAI,CAAC,GAAG,CACR,OAAO,cAAE,KAAC,IAAI,IAAI,EAClB,cAEF,KAAC,KAAK,EACJ,IAAI,CAAC,aAAa,CAClB,OAAO,cAAE,KAAC,UACV;AAAA,IACD,EACD,cAGN,KAAC,KAAK,EACE,IAAI,CAAC,aAAa,CAClB,OAAO,cAAE,qBAEV,EACD,cAKF,KAAC,KAAK,EACJ,IAAI,CAAC,WAAW,CAChB,OAAO,cAAE,KAAC,QACV;AAAA,IACC,EACD,cAYL,KAAC,KAAK,EACH,IAAI,CAAC,WAAW,CAChB,OAAO,cAAE,KAAC,QAAQ,EAClB,QAAQ,CAAGC,QAAU,CACrB,KAAK,CAAED,KAAM,CACb,QAAQ,CAAEI,QAAS,EAClB,EACH,cACF,KAAC,KAAK,EACF,IAAI,CAAC,QAAQ,CACb,OAAO,cAAG,KAAC,KAAK,EAChB,QAAQ,CAAGH,QAAU,CACrB,QAAQ,CAAGG,QAAU,EACpB,EACH,GACa,EACK,GACV,CAEV,CAAC,CAED,cAAeP,IAAG"},"metadata":{},"sourceType":"module"}